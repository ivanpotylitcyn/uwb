# uwb
Underwater Beacon

# Подводный маяк

Прибор для того, чтобы вылавливать ТНПА. Чувствует погружение, чувствует всплытие. Сигналит, всплыл и питается от аккууляторов.

# Регистры Modbus

### Чтение

1. `0x01` - температрура
1. `0x02` - влажность
1. `0x03` - давление
1. ...

### Запись

1. `0x07` - порог погружения
1. `0x08` - порог всплытия
1. ...

# Инструкция по штатному применению

## Включние маяка

1. Подать на маяк питание от аккумуляторов
1. Убедиться, что зажглись светодиоды, то есть включилось питание `3V3`, `5V0` и `6V0`

## Командный режим

1. Подключить шину RS485 согласно фот этой фотографии

![image info](./pictures/image.png)

4. Запустить программу Modbus poll
1. Задать Deevice ID так-то
1. ...
1. Убдеиться, что показания соответствуют картинке:

![image info](./pictures/image.png)

1. Отправить команду `включить светодиоды`
1. Убедиться, что они включились

## Аварийный режим

1. Подключить шприц, как показано на картинке
1. Сжать сшприц, повысить давление, убедиться, что сетодиод не моргает
1. Отжать шприц, понизить давление, убедить, что светодиод начал моргать

## Режим сна

1. Из любого режим поднести к голове магнит, как показано на картинке
1. Убедиться, что потребление маяка не превышает `10мА`
1. Подать питниае на `24В` и убдедиться, что светододы включились, то есть включилось питание `3V3`, `5V0` и `6V0`
1. Проверить работоспособность целевой функции после выхода из режима сна

## Выключение маяка

1. Отсоединить от аккумуляторов